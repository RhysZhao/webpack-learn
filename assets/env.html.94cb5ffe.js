import{_ as n,c as s}from"./app.eb91e7ca.js";const a={},p=s(`<h1 id="\u533A\u5206\u5F00\u53D1\u4E0E\u751F\u4EA7\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#\u533A\u5206\u5F00\u53D1\u4E0E\u751F\u4EA7\u73AF\u5883" aria-hidden="true">#</a> \u533A\u5206\u5F00\u53D1\u4E0E\u751F\u4EA7\u73AF\u5883</h1><p>webpack \u7684 mode \u5C5E\u6027\u7528\u6765\u6807\u8BC6\u6253\u5305\u73AF\u5883\u3002</p><ul><li><code>mode: &#39;development&#39;</code>: \u5F00\u53D1\u73AF\u5883\uFF0C\u4F1A\u542F\u52A8\u4E00\u4E2A\u672C\u5730\u670D\u52A1\u5668\u3002</li><li><code>mode: &#39;production&#39;</code>: \u751F\u4EA7\u73AF\u5883\uFF0C\u4F1A\u628A\u9879\u76EE\u4EE3\u7801\u6253\u5305\uFF0C\u4EE5\u4FBF\u90E8\u7F72\u4E0A\u7EBF\u3002</li></ul><h2 id="\u589E\u52A0-webpack-\u914D\u7F6E\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#\u589E\u52A0-webpack-\u914D\u7F6E\u76EE\u5F55" aria-hidden="true">#</a> \u589E\u52A0 webpack \u914D\u7F6E\u76EE\u5F55</h2><p>\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u589E\u52A0 webpack \u76EE\u5F55\uFF0C\u7528\u6765\u5B58\u653E webpack \u914D\u7F6E\u3002</p><p>\u5728 webpack \u76EE\u5F55\u589E\u52A0\u56DB\u4E2A\u6587\u4EF6:</p><ul><li><code>webpack.config.common.js</code>: \u7528\u6765\u5B58\u653E\u5F00\u53D1\u4E0E\u751F\u4EA7\u73AF\u5883\u516C\u5171\u7684\u914D\u7F6E</li><li><code>webpack.config.dev.js</code>: \u7528\u6765\u5B58\u653E\u5F00\u53D1\u73AF\u5883\u7684\u914D\u7F6E</li><li><code>webpack.config.prod.js</code>: \u7528\u6765\u5B58\u653E\u751F\u4EA7\u73AF\u5883\u7684\u914D\u7F6E</li><li><code>webpack.config.js</code>: \u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u6765\u5408\u5E76\u914D\u7F6E\u3002</li></ul><p>\u6B64\u65F6\uFF0C\u9879\u76EE\u76EE\u5F55\u7ED3\u6784\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>webpack-demo
\u251C\u2500 src
\u2502  \u251C\u2500 assets
\u2502  \u2502  \u251C\u2500 bg.jpeg
\u2502  \u2502  \u2514\u2500 hello.txt
\u2502  \u251C\u2500 index.js
\u2502  \u251C\u2500 index.less
\u2502  \u2514\u2500 math.js
\u251C\u2500 webpack
\u2502  \u251C\u2500 webpack.config.common.js
\u2502  \u251C\u2500 webpack.config.dev.js
\u2502  \u251C\u2500 webpack.config.js
\u2502  \u2514\u2500 webpack.config.prod.js
\u251C\u2500 babel.config.js
\u251C\u2500 package-lock.json
\u2514\u2500 package.json
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="\u516C\u5171\u914D\u7F6E-webpack-config-common-js" tabindex="-1"><a class="header-anchor" href="#\u516C\u5171\u914D\u7F6E-webpack-config-common-js" aria-hidden="true">#</a> \u516C\u5171\u914D\u7F6E <code>webpack.config.common.js</code></h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(png|svg|jpg|jpeg|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.txt$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="\u5F00\u53D1\u73AF\u5883\u914D\u7F6E-webpack-config-dev-js" tabindex="-1"><a class="header-anchor" href="#\u5F00\u53D1\u73AF\u5883\u914D\u7F6E-webpack-config-dev-js" aria-hidden="true">#</a> \u5F00\u53D1\u73AF\u5883\u914D\u7F6E <code>webpack.config.dev.js</code></h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u542F\u52A8\u670D\u52A1\u5668\u57DF\u540D</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;8081&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u7AEF\u53E3</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// \u81EA\u52A8\u6253\u5F00\u6D4F\u89C8\u5668</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="\u751F\u4EA7\u73AF\u5883\u914D\u7F6E-webpack-config-prod-js" tabindex="-1"><a class="header-anchor" href="#\u751F\u4EA7\u73AF\u5883\u914D\u7F6E-webpack-config-prod-js" aria-hidden="true">#</a> \u751F\u4EA7\u73AF\u5883\u914D\u7F6E <code>webpack.config.prod.js</code></h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="\u5408\u5E76\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5408\u5E76\u914D\u7F6E" aria-hidden="true">#</a> \u5408\u5E76\u914D\u7F6E</h2><p><code>webpack.config.js</code> \u7528\u6765\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u6765\u5408\u5E76\u914D\u7F6E\u3002</p><ul><li>\u5F00\u53D1\u73AF\u5883\u5408\u5E76 <code>webpack.config.dev.js</code> \u4E0E <code>webpack.config.common.js</code></li><li>\u751F\u4EA7\u73AF\u5883\u5408\u5E76 <code>webpack.config.prod.js</code> \u548C <code>webpack.config.common.js</code></li></ul><h3 id="_1-\u914D\u7F6E\u73AF\u5883\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_1-\u914D\u7F6E\u73AF\u5883\u53D8\u91CF" aria-hidden="true">#</a> 1. \u914D\u7F6E\u73AF\u5883\u53D8\u91CF</h3><p>\u4FEE\u6539 <code>package.json</code>\u91CC\u7684 scripts, \u5982\u4E0B\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// ...</span>
 <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development webpack server --config ./webpack/webpack.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production webpack --config ./webpack/webpack.config.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u7528\u5230\u4E86\u4E00\u4E2A\u63D2\u4EF6 cross-env\u3002\u5B89\u88C5\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i cross-env <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>cross-env \u662F\u4E00\u6B3E\u8FD0\u884C\u8DE8\u5E73\u53F0\u8BBE\u7F6E\u548C\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\u7684\u811A\u672C\u3002\u5728 <code>npm start</code> \u4E0E <code>npm run build</code> \u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u5B9A\u4E49\u4E86\u73AF\u5883\u53D8\u91CF <code>NODE_ENV</code>\u5206\u522B\u4E3A development \u548C production\u3002</p><p>\u5728 webpack \u914D\u7F6E\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u62FF\u5230\u8FD9\u4E2A\u73AF\u5883\u53D8\u91CF\uFF0C\u4ECE\u800C\u5224\u65AD\u662F\u5F00\u53D1\u8FD8\u662F\u751F\u4EA7\u73AF\u5883\u3002</p><h3 id="_2-\u914D\u7F6E-webpack-config-js" tabindex="-1"><a class="header-anchor" href="#_2-\u914D\u7F6E-webpack-config-js" aria-hidden="true">#</a> 2. \u914D\u7F6E <code>webpack.config.js</code></h3><p>\u5408\u5E76 webpack \u914D\u7F6E\u9700\u8981\u7528\u5230\u4E00\u4E2A\u63D2\u4EF6 <code>webpack-merge</code>\uFF0C\u5B89\u88C5\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i webpack-merge <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u6211\u4EEC\u914D\u7F6E <code>webpack.config.js</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.common&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.dev&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.prod&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u901A\u8FC7\u73AF\u5883\u53D8\u91CF NODE_ENV \u6765\u5224\u65AD\u5F53\u524D\u73AF\u5883</span>
    <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>webpack \u7684\u914D\u7F6E\u53EF\u4EE5\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4E00\u4E2A\u8FD4\u56DE\u5BF9\u8C61\u7684\u51FD\u6570\u3002</p><p>\u8FD9\u91CC\uFF0C\u6211\u4EEC\u901A\u8FC7\u73AF\u5883\u53D8\u91CF<code>NODE_ENV</code>\u6765\u5224\u65AD\u5F53\u524D\u73AF\u5883(\u5F00\u53D1\u8FD8\u662F\u751F\u4EA7)\uFF0C\u7136\u540E\u8FD4\u56DE\u5BF9\u5E94\u7684\u914D\u7F6E\u3002</p><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><ol><li>webpack-merge \u7528\u6765\u5408\u5E76 webpack \u914D\u7F6E</li><li>cross-env \u53EF\u4EE5\u5B9A\u4E49\u73AF\u5883\u53D8\u91CF\uFF0C\u7528\u6765\u533A\u5206\u5F53\u524D\u73AF\u5883</li></ol>`,34);function e(t,o){return p}var l=n(a,[["render",e],["__file","env.html.vue"]]);export{l as default};
